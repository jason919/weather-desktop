import{ah as it,ai as ot,m as at,f as U,d as tt,q as ut,o as K,e as ct,b as lt,t as ft,W as ht,aj as dt,$ as pt,a as P,w as yt,u as $t,y as mt,r as B}from"./index-U4clKJkw.js";import{u as V,D as R,b as gt,c as wt,L as kt}from"./GeoApi-C9FCh2v_.js";var et={exports:{}};(function(c,u){(function(l,i){c.exports=i()})(it,function(){var l=1e3,i=6e4,f=36e5,m="millisecond",D="second",g="minute",S="hour",k="day",x="week",M="month",N="quarter",_="year",b="date",Y="Invalid Date",j=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,rt=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,nt={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(s){var r=["th","st","nd","rd"],t=s%100;return"["+s+(r[(t-20)%10]||r[t]||r[0])+"]"}},Z=function(s,r,t){var n=String(s);return!n||n.length>=r?s:""+Array(r+1-n.length).join(t)+s},st={s:Z,z:function(s){var r=-s.utcOffset(),t=Math.abs(r),n=Math.floor(t/60),e=t%60;return(r<=0?"+":"-")+Z(n,2,"0")+":"+Z(e,2,"0")},m:function s(r,t){if(r.date()<t.date())return-s(t,r);var n=12*(t.year()-r.year())+(t.month()-r.month()),e=r.clone().add(n,M),o=t-e<0,a=r.clone().add(n+(o?-1:1),M);return+(-(n+(t-e)/(o?e-a:a-e))||0)},a:function(s){return s<0?Math.ceil(s)||0:Math.floor(s)},p:function(s){return{M,y:_,w:x,d:k,D:b,h:S,m:g,s:D,ms:m,Q:N}[s]||String(s||"").toLowerCase().replace(/s$/,"")},u:function(s){return s===void 0}},I="en",F={};F[I]=nt;var J="$isDayjsObject",G=function(s){return s instanceof E||!(!s||!s[J])},H=function s(r,t,n){var e;if(!r)return I;if(typeof r=="string"){var o=r.toLowerCase();F[o]&&(e=o),t&&(F[o]=t,e=o);var a=r.split("-");if(!e&&a.length>1)return s(a[0])}else{var d=r.name;F[d]=r,e=d}return!n&&e&&(I=e),e||!n&&I},y=function(s,r){if(G(s))return s.clone();var t=typeof r=="object"?r:{};return t.date=s,t.args=arguments,new E(t)},h=st;h.l=H,h.i=G,h.w=function(s,r){return y(s,{locale:r.$L,utc:r.$u,x:r.$x,$offset:r.$offset})};var E=function(){function s(t){this.$L=H(t.locale,null,!0),this.parse(t),this.$x=this.$x||t.x||{},this[J]=!0}var r=s.prototype;return r.parse=function(t){this.$d=function(n){var e=n.date,o=n.utc;if(e===null)return new Date(NaN);if(h.u(e))return new Date;if(e instanceof Date)return new Date(e);if(typeof e=="string"&&!/Z$/i.test(e)){var a=e.match(j);if(a){var d=a[2]-1||0,p=(a[7]||"0").substring(0,3);return o?new Date(Date.UTC(a[1],d,a[3]||1,a[4]||0,a[5]||0,a[6]||0,p)):new Date(a[1],d,a[3]||1,a[4]||0,a[5]||0,a[6]||0,p)}}return new Date(e)}(t),this.init()},r.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},r.$utils=function(){return h},r.isValid=function(){return this.$d.toString()!==Y},r.isSame=function(t,n){var e=y(t);return this.startOf(n)<=e&&e<=this.endOf(n)},r.isAfter=function(t,n){return y(t)<this.startOf(n)},r.isBefore=function(t,n){return this.endOf(n)<y(t)},r.$g=function(t,n,e){return h.u(t)?this[n]:this.set(e,t)},r.unix=function(){return Math.floor(this.valueOf()/1e3)},r.valueOf=function(){return this.$d.getTime()},r.startOf=function(t,n){var e=this,o=!!h.u(n)||n,a=h.p(t),d=function(W,v){var L=h.w(e.$u?Date.UTC(e.$y,v,W):new Date(e.$y,v,W),e);return o?L:L.endOf(k)},p=function(W,v){return h.w(e.toDate()[W].apply(e.toDate("s"),(o?[0,0,0,0]:[23,59,59,999]).slice(v)),e)},$=this.$W,w=this.$M,C=this.$D,T="set"+(this.$u?"UTC":"");switch(a){case _:return o?d(1,0):d(31,11);case M:return o?d(1,w):d(0,w+1);case x:var O=this.$locale().weekStart||0,A=($<O?$+7:$)-O;return d(o?C-A:C+(6-A),w);case k:case b:return p(T+"Hours",0);case S:return p(T+"Minutes",1);case g:return p(T+"Seconds",2);case D:return p(T+"Milliseconds",3);default:return this.clone()}},r.endOf=function(t){return this.startOf(t,!1)},r.$set=function(t,n){var e,o=h.p(t),a="set"+(this.$u?"UTC":""),d=(e={},e[k]=a+"Date",e[b]=a+"Date",e[M]=a+"Month",e[_]=a+"FullYear",e[S]=a+"Hours",e[g]=a+"Minutes",e[D]=a+"Seconds",e[m]=a+"Milliseconds",e)[o],p=o===k?this.$D+(n-this.$W):n;if(o===M||o===_){var $=this.clone().set(b,1);$.$d[d](p),$.init(),this.$d=$.set(b,Math.min(this.$D,$.daysInMonth())).$d}else d&&this.$d[d](p);return this.init(),this},r.set=function(t,n){return this.clone().$set(t,n)},r.get=function(t){return this[h.p(t)]()},r.add=function(t,n){var e,o=this;t=Number(t);var a=h.p(n),d=function(w){var C=y(o);return h.w(C.date(C.date()+Math.round(w*t)),o)};if(a===M)return this.set(M,this.$M+t);if(a===_)return this.set(_,this.$y+t);if(a===k)return d(1);if(a===x)return d(7);var p=(e={},e[g]=i,e[S]=f,e[D]=l,e)[a]||1,$=this.$d.getTime()+t*p;return h.w($,this)},r.subtract=function(t,n){return this.add(-1*t,n)},r.format=function(t){var n=this,e=this.$locale();if(!this.isValid())return e.invalidDate||Y;var o=t||"YYYY-MM-DDTHH:mm:ssZ",a=h.z(this),d=this.$H,p=this.$m,$=this.$M,w=e.weekdays,C=e.months,T=e.meridiem,O=function(v,L,z,q){return v&&(v[L]||v(n,o))||z[L].slice(0,q)},A=function(v){return h.s(d%12||12,v,"0")},W=T||function(v,L,z){var q=v<12?"AM":"PM";return z?q.toLowerCase():q};return o.replace(rt,function(v,L){return L||function(z){switch(z){case"YY":return String(n.$y).slice(-2);case"YYYY":return h.s(n.$y,4,"0");case"M":return $+1;case"MM":return h.s($+1,2,"0");case"MMM":return O(e.monthsShort,$,C,3);case"MMMM":return O(C,$);case"D":return n.$D;case"DD":return h.s(n.$D,2,"0");case"d":return String(n.$W);case"dd":return O(e.weekdaysMin,n.$W,w,2);case"ddd":return O(e.weekdaysShort,n.$W,w,3);case"dddd":return w[n.$W];case"H":return String(d);case"HH":return h.s(d,2,"0");case"h":return A(1);case"hh":return A(2);case"a":return W(d,p,!0);case"A":return W(d,p,!1);case"m":return String(p);case"mm":return h.s(p,2,"0");case"s":return String(n.$s);case"ss":return h.s(n.$s,2,"0");case"SSS":return h.s(n.$ms,3,"0");case"Z":return a}return null}(v)||a.replace(":","")})},r.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},r.diff=function(t,n,e){var o,a=this,d=h.p(n),p=y(t),$=(p.utcOffset()-this.utcOffset())*i,w=this-p,C=function(){return h.m(a,p)};switch(d){case _:o=C()/12;break;case M:o=C();break;case N:o=C()/3;break;case x:o=(w-$)/6048e5;break;case k:o=(w-$)/864e5;break;case S:o=w/f;break;case g:o=w/i;break;case D:o=w/l;break;default:o=w}return e?o:h.a(o)},r.daysInMonth=function(){return this.endOf(M).$D},r.$locale=function(){return F[this.$L]},r.locale=function(t,n){if(!t)return this.$L;var e=this.clone(),o=H(t,n,!0);return o&&(e.$L=o),e},r.clone=function(){return h.w(this.$d,this)},r.toDate=function(){return new Date(this.valueOf())},r.toJSON=function(){return this.isValid()?this.toISOString():null},r.toISOString=function(){return this.$d.toISOString()},r.toString=function(){return this.$d.toUTCString()},s}(),Q=E.prototype;return y.prototype=Q,[["$ms",m],["$s",D],["$m",g],["$H",S],["$W",k],["$M",M],["$y",_],["$D",b]].forEach(function(s){Q[s[1]]=function(r){return this.$g(r,s[0],s[1])}}),y.extend=function(s,r){return s.$i||(s(r,E,y),s.$i=!0),y},y.locale=H,y.isDayjs=G,y.unix=function(s){return y(1e3*s)},y.en=F[I],y.Ls=F,y.p={},y})})(et);var vt=et.exports;const Mt=ot(vt);var Ct={size:"1em",strokeWidth:4,strokeLinecap:"round",strokeLinejoin:"round",rtl:!1,theme:"outline",colors:{outline:{fill:"#333",background:"transparent"},filled:{fill:"#333",background:"#FFF"},twoTone:{fill:"#333",twoTone:"#2F88FF"},multiColor:{outStrokeColor:"#333",outFillColor:"#2F88FF",innerStrokeColor:"#FFF",innerFillColor:"#43CCF8"}},prefix:"i"};function Dt(){return"icon-"+((1+Math.random())*4294967296|0).toString(16).substring(1)}function St(c,u,l){var i=typeof u.fill=="string"?[u.fill]:u.fill||[],f=[],m=u.theme||l.theme;switch(m){case"outline":f.push(typeof i[0]=="string"?i[0]:"currentColor"),f.push("none"),f.push(typeof i[0]=="string"?i[0]:"currentColor"),f.push("none");break;case"filled":f.push(typeof i[0]=="string"?i[0]:"currentColor"),f.push(typeof i[0]=="string"?i[0]:"currentColor"),f.push("#FFF"),f.push("#FFF");break;case"two-tone":f.push(typeof i[0]=="string"?i[0]:"currentColor"),f.push(typeof i[1]=="string"?i[1]:l.colors.twoTone.twoTone),f.push(typeof i[0]=="string"?i[0]:"currentColor"),f.push(typeof i[1]=="string"?i[1]:l.colors.twoTone.twoTone);break;case"multi-color":f.push(typeof i[0]=="string"?i[0]:"currentColor"),f.push(typeof i[1]=="string"?i[1]:l.colors.multiColor.outFillColor),f.push(typeof i[2]=="string"?i[2]:l.colors.multiColor.innerStrokeColor),f.push(typeof i[3]=="string"?i[3]:l.colors.multiColor.innerFillColor);break}return{size:u.size||l.size,strokeWidth:u.strokeWidth||l.strokeWidth,strokeLinecap:u.strokeLinecap||l.strokeLinecap,strokeLinejoin:u.strokeLinejoin||l.strokeLinejoin,colors:f,id:c}}var _t=Symbol("icon-context");function bt(c,u,l){var i={name:"icon-"+c,props:["size","strokeWidth","strokeLinecap","strokeLinejoin","theme","fill","spin"],setup:function(m){var D=Dt(),g=at(_t,Ct);return function(){var S=m.size,k=m.strokeWidth,x=m.strokeLinecap,M=m.strokeLinejoin,N=m.theme,_=m.fill,b=m.spin,Y=St(D,{size:S,strokeWidth:k,strokeLinecap:x,strokeLinejoin:M,theme:N,fill:_},g),j=[g.prefix+"-icon"];return j.push(g.prefix+"-icon-"+c),u&&g.rtl&&j.push(g.prefix+"-icon-rtl"),b&&j.push(g.prefix+"-icon-spin"),U("span",{class:j.join(" ")},[l(Y)])}}};return i}const jt=bt("local-two",!1,function(c){return U("svg",{width:c.size,height:c.size,viewBox:"0 0 48 48",fill:"none"},[U("path",{d:"M24 44C24 44 39 32 39 19C39 10.7157 32.2843 4 24 4C15.7157 4 9 10.7157 9 19C9 32 24 44 24 44Z",fill:c.colors[1],stroke:c.colors[0],"stroke-width":c.strokeWidth,"stroke-linejoin":c.strokeLinejoin},null),U("path",{d:"M24 25C27.3137 25 30 22.3137 30 19C30 15.6863 27.3137 13 24 13C20.6863 13 18 15.6863 18 19C18 22.3137 20.6863 25 24 25Z",fill:c.colors[3],stroke:c.colors[2],"stroke-width":c.strokeWidth,"stroke-linejoin":c.strokeLinejoin},null)])}),Lt={class:"p-3"},Ft=tt({__name:"EmptyView",props:{msg:{type:String,required:!1}},setup(c){const u=ut(ht,{});function l(){dt.openConfigPage(u.widgetParams.id)}return(i,f)=>(K(),ct("div",{class:"empty-key flex w-full text-center h-full items-center justify-center cursor-pointer",onClick:l},[lt("p",Lt,ft(c.msg),1)]))}}),Ot=(c,u)=>{const l=c.__vccOpts||c;for(const[i,f]of u)l[i]=f;return l},X=Ot(Ft,[["__scopeId","data-v-c8a8b1f0"]]),Tt=tt({__name:"QWeatherWrapper",props:{errorMsg:{type:String,required:!1},loading:{type:Boolean,required:!1},checkApiKey:{type:Boolean,required:!1,default:!0}},setup(c){const u=V("apiKey","");return(l,i)=>{const f=pt("widget-wrapper");return K(),P(f,null,{default:yt(()=>[c.checkApiKey&&!$t(u)?(K(),P(X,{key:0,msg:"点击设置 和风天气 API KEY"})):c.errorMsg?(K(),P(X,{key:1,msg:c.errorMsg},null,8,["msg"])):mt(l.$slots,"default",{key:2})]),_:3})}}});function It(c){const u=V("locationId",R.id),l=V("selectLocation",R),i=V("apiKey",""),f=B(Mt()),m=B(""),D=B(),g=B(!1),S=()=>{m.value="",g.value=!0,c().then(k=>{D.value=k}).catch(k=>{m.value=k.message}).finally(()=>g.value=!1)};return gt(()=>{S()},60*60*1e3),{locationId:u,selectLocation:l,apiKey:i,now:f,loading:g,update:S,errorMsg:m,responseData:D}}class At{static getBackgroundClass(u){return this.between(u,101,104)||this.between(u,151,153)?"city-weather-cloudy":this.between(u,101,399)?"city-weather-rain":this.between(u,400,499)?"city-weather-snow":this.between(u,500,515)?"city-weather-haze":"city-weather-sun"}static between(u,l,i){return u>=l&&u<=i}}class zt{static async get(u,l=kt){return(await wt.get(`https://widget-api.qweather.net/s6/plugin/view?key=68d458440fb9405d80a45973018cf1a2&location=CN${u}&lang=${l}`)).data}static getAQIClass(u){return u<=50?"city-weather-aqi-1":u<=100?"city-weather-aqi-2":u<=150?"city-weather-aqi-3":u<=200?"city-weather-aqi-4":u<=300?"city-weather-aqi-5":"city-weather-aqi-6"}}export{jt as L,At as W,Tt as _,zt as a,Ot as b,Mt as d,It as u};
