import{r as W,q as H,v as _,j as q,E as K,D as x,aa as $,m as B,ag as Q,ah as U,s as X}from"./index-Qjn5_gI8.js";function E(e){return Q()?(U(e),!0):!1}function S(e){return typeof e=="function"?e():q(e)}const T=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Y=Object.prototype.toString,Z=e=>Y.call(e)==="[object Object]",j=()=>{};function z(e,n){function t(...r){return new Promise((a,o)=>{Promise.resolve(e(()=>n.apply(this,r),{fn:n,thisArg:this,args:r})).then(a).catch(o)})}return t}const P=e=>e();function k(e,n={}){let t,r,a=j;const o=c=>{clearTimeout(c),a(),a=j};return c=>{const d=S(e),u=S(n.maxWait);return t&&o(t),d<=0||u!==void 0&&u<=0?(r&&(o(r),r=null),Promise.resolve(c())):new Promise((s,f)=>{a=n.rejectOnCancel?f:s,u&&!r&&(r=setTimeout(()=>{t&&o(t),r=null,s(c())},u)),t=setTimeout(()=>{r&&o(r),r=null,s(c())},d)})}}function ee(e=P){const n=W(!0);function t(){n.value=!1}function r(){n.value=!0}const a=(...o)=>{n.value&&e(...o)};return{isActive:$(n),pause:t,resume:r,eventFilter:a}}function te(e){return e||B()}function pe(e,n=200,t={}){return z(k(n,t),e)}function ne(e,n,t={}){const{eventFilter:r=P,...a}=t;return _(e,z(r,n),a)}function re(e,n,t={}){const{eventFilter:r,...a}=t,{eventFilter:o,pause:p,resume:c,isActive:d}=ee(r);return{stop:ne(e,n,{...a,eventFilter:o}),pause:p,resume:c,isActive:d}}function ie(e,n=!0,t){te()?K(e,t):n?e():x(e)}function de(e,n=1e3,t={}){const{immediate:r=!0,immediateCallback:a=!1}=t;let o=null;const p=W(!1);function c(){o&&(clearInterval(o),o=null)}function d(){p.value=!1,c()}function u(){const s=S(n);s<=0||(p.value=!0,a&&e(),c(),o=setInterval(e,s))}if(r&&T&&u(),H(n)||typeof n=="function"){const s=_(n,()=>{p.value&&T&&u()});E(s)}return E(d),{isActive:p,pause:d,resume:u}}function oe(e){var n;const t=S(e);return(n=t==null?void 0:t.$el)!=null?n:t}const N=T?window:void 0;function M(...e){let n,t,r,a;if(typeof e[0]=="string"||Array.isArray(e[0])?([t,r,a]=e,n=N):[n,t,r,a]=e,!n)return j;Array.isArray(t)||(t=[t]),Array.isArray(r)||(r=[r]);const o=[],p=()=>{o.forEach(s=>s()),o.length=0},c=(s,f,h,m)=>(s.addEventListener(f,h,m),()=>s.removeEventListener(f,h,m)),d=_(()=>[oe(n),S(a)],([s,f])=>{if(p(),!s)return;const h=Z(f)?{...f}:f;o.push(...t.flatMap(m=>r.map(v=>c(s,m,v,h))))},{immediate:!0,flush:"post"}),u=()=>{d(),p()};return E(u),u}const O=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},F="__vueuse_ssr_handlers__",ae=se();function se(){return F in O||(O[F]=O[F]||{}),O[F]}function ue(e,n){return ae[e]||n}function le(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}const ce={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},V="vueuse-storage";function me(e,n,t,r={}){var a;const{flush:o="pre",deep:p=!0,listenToStorageChanges:c=!0,writeDefaults:d=!0,mergeDefaults:u=!1,shallow:s,window:f=N,eventFilter:h,onError:m=i=>{console.error(i)},initOnMounted:v}=r,w=(s?X:W)(typeof n=="function"?n():n);if(!t)try{t=ue("getDefaultStorage",()=>{var i;return(i=N)==null?void 0:i.localStorage})()}catch(i){m(i)}if(!t)return w;const g=S(n),C=le(g),b=(a=r.serializer)!=null?a:ce[C],{pause:I,resume:D}=re(w,()=>L(w.value),{flush:o,deep:p,eventFilter:h});f&&c&&ie(()=>{M(f,"storage",A),M(f,V,G),v&&A()}),v||A();function J(i,l){f&&f.dispatchEvent(new CustomEvent(V,{detail:{key:e,oldValue:i,newValue:l,storageArea:t}}))}function L(i){try{const l=t.getItem(e);if(i==null)J(l,null),t.removeItem(e);else{const y=b.write(i);l!==y&&(t.setItem(e,y),J(l,y))}}catch(l){m(l)}}function R(i){const l=i?i.newValue:t.getItem(e);if(l==null)return d&&g!=null&&t.setItem(e,b.write(g)),g;if(!i&&u){const y=b.read(l);return typeof u=="function"?u(y,g):C==="object"&&!Array.isArray(y)?{...g,...y}:y}else return typeof l!="string"?l:b.read(l)}function A(i){if(!(i&&i.storageArea!==t)){if(i&&i.key==null){w.value=g;return}if(!(i&&i.key!==e)){I();try{(i==null?void 0:i.newValue)!==b.write(w.value)&&(w.value=R(i))}catch(l){m(l)}finally{i?x(D):D()}}}}function G(i){A(i.detail)}return w}export{de as a,pe as b,me as u};
