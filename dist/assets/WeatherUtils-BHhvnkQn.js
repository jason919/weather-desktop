import{ah as it,ai as ot,m as at,f as K,d as tt,P as ut,o as P,e as ct,b as lt,t as ft,W as ht,aj as dt,$ as pt,a as J,w as $t,u as mt,x as yt,r as U}from"./index-CQjnhD6T.js";import{u as V,D as R,c as gt}from"./GeoApi-CldX5Bk7.js";var et={exports:{}};(function(u,c){(function(h,a){u.exports=a()})(it,function(){var h=1e3,a=6e4,l=36e5,y="millisecond",D="second",g="minute",S="hour",v="day",W="week",M="month",Y="quarter",_="year",b="date",H="Invalid Date",j=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,rt=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,nt={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(s){var r=["th","st","nd","rd"],t=s%100;return"["+s+(r[(t-20)%10]||r[t]||r[0])+"]"}},Z=function(s,r,t){var n=String(s);return!n||n.length>=r?s:""+Array(r+1-n.length).join(t)+s},st={s:Z,z:function(s){var r=-s.utcOffset(),t=Math.abs(r),n=Math.floor(t/60),e=t%60;return(r<=0?"+":"-")+Z(n,2,"0")+":"+Z(e,2,"0")},m:function s(r,t){if(r.date()<t.date())return-s(t,r);var n=12*(t.year()-r.year())+(t.month()-r.month()),e=r.clone().add(n,M),i=t-e<0,o=r.clone().add(n+(i?-1:1),M);return+(-(n+(t-e)/(i?e-o:o-e))||0)},a:function(s){return s<0?Math.ceil(s)||0:Math.floor(s)},p:function(s){return{M,y:_,w:W,d:v,D:b,h:S,m:g,s:D,ms:y,Q:Y}[s]||String(s||"").toLowerCase().replace(/s$/,"")},u:function(s){return s===void 0}},I="en",F={};F[I]=nt;var G="$isDayjsObject",q=function(s){return s instanceof B||!(!s||!s[G])},N=function s(r,t,n){var e;if(!r)return I;if(typeof r=="string"){var i=r.toLowerCase();F[i]&&(e=i),t&&(F[i]=t,e=i);var o=r.split("-");if(!e&&o.length>1)return s(o[0])}else{var d=r.name;F[d]=r,e=d}return!n&&e&&(I=e),e||!n&&I},$=function(s,r){if(q(s))return s.clone();var t=typeof r=="object"?r:{};return t.date=s,t.args=arguments,new B(t)},f=st;f.l=N,f.i=q,f.w=function(s,r){return $(s,{locale:r.$L,utc:r.$u,x:r.$x,$offset:r.$offset})};var B=function(){function s(t){this.$L=N(t.locale,null,!0),this.parse(t),this.$x=this.$x||t.x||{},this[G]=!0}var r=s.prototype;return r.parse=function(t){this.$d=function(n){var e=n.date,i=n.utc;if(e===null)return new Date(NaN);if(f.u(e))return new Date;if(e instanceof Date)return new Date(e);if(typeof e=="string"&&!/Z$/i.test(e)){var o=e.match(j);if(o){var d=o[2]-1||0,p=(o[7]||"0").substring(0,3);return i?new Date(Date.UTC(o[1],d,o[3]||1,o[4]||0,o[5]||0,o[6]||0,p)):new Date(o[1],d,o[3]||1,o[4]||0,o[5]||0,o[6]||0,p)}}return new Date(e)}(t),this.init()},r.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},r.$utils=function(){return f},r.isValid=function(){return this.$d.toString()!==H},r.isSame=function(t,n){var e=$(t);return this.startOf(n)<=e&&e<=this.endOf(n)},r.isAfter=function(t,n){return $(t)<this.startOf(n)},r.isBefore=function(t,n){return this.endOf(n)<$(t)},r.$g=function(t,n,e){return f.u(t)?this[n]:this.set(e,t)},r.unix=function(){return Math.floor(this.valueOf()/1e3)},r.valueOf=function(){return this.$d.getTime()},r.startOf=function(t,n){var e=this,i=!!f.u(n)||n,o=f.p(t),d=function(x,w){var L=f.w(e.$u?Date.UTC(e.$y,w,x):new Date(e.$y,w,x),e);return i?L:L.endOf(v)},p=function(x,w){return f.w(e.toDate()[x].apply(e.toDate("s"),(i?[0,0,0,0]:[23,59,59,999]).slice(w)),e)},m=this.$W,k=this.$M,C=this.$D,T="set"+(this.$u?"UTC":"");switch(o){case _:return i?d(1,0):d(31,11);case M:return i?d(1,k):d(0,k+1);case W:var O=this.$locale().weekStart||0,A=(m<O?m+7:m)-O;return d(i?C-A:C+(6-A),k);case v:case b:return p(T+"Hours",0);case S:return p(T+"Minutes",1);case g:return p(T+"Seconds",2);case D:return p(T+"Milliseconds",3);default:return this.clone()}},r.endOf=function(t){return this.startOf(t,!1)},r.$set=function(t,n){var e,i=f.p(t),o="set"+(this.$u?"UTC":""),d=(e={},e[v]=o+"Date",e[b]=o+"Date",e[M]=o+"Month",e[_]=o+"FullYear",e[S]=o+"Hours",e[g]=o+"Minutes",e[D]=o+"Seconds",e[y]=o+"Milliseconds",e)[i],p=i===v?this.$D+(n-this.$W):n;if(i===M||i===_){var m=this.clone().set(b,1);m.$d[d](p),m.init(),this.$d=m.set(b,Math.min(this.$D,m.daysInMonth())).$d}else d&&this.$d[d](p);return this.init(),this},r.set=function(t,n){return this.clone().$set(t,n)},r.get=function(t){return this[f.p(t)]()},r.add=function(t,n){var e,i=this;t=Number(t);var o=f.p(n),d=function(k){var C=$(i);return f.w(C.date(C.date()+Math.round(k*t)),i)};if(o===M)return this.set(M,this.$M+t);if(o===_)return this.set(_,this.$y+t);if(o===v)return d(1);if(o===W)return d(7);var p=(e={},e[g]=a,e[S]=l,e[D]=h,e)[o]||1,m=this.$d.getTime()+t*p;return f.w(m,this)},r.subtract=function(t,n){return this.add(-1*t,n)},r.format=function(t){var n=this,e=this.$locale();if(!this.isValid())return e.invalidDate||H;var i=t||"YYYY-MM-DDTHH:mm:ssZ",o=f.z(this),d=this.$H,p=this.$m,m=this.$M,k=e.weekdays,C=e.months,T=e.meridiem,O=function(w,L,z,E){return w&&(w[L]||w(n,i))||z[L].slice(0,E)},A=function(w){return f.s(d%12||12,w,"0")},x=T||function(w,L,z){var E=w<12?"AM":"PM";return z?E.toLowerCase():E};return i.replace(rt,function(w,L){return L||function(z){switch(z){case"YY":return String(n.$y).slice(-2);case"YYYY":return f.s(n.$y,4,"0");case"M":return m+1;case"MM":return f.s(m+1,2,"0");case"MMM":return O(e.monthsShort,m,C,3);case"MMMM":return O(C,m);case"D":return n.$D;case"DD":return f.s(n.$D,2,"0");case"d":return String(n.$W);case"dd":return O(e.weekdaysMin,n.$W,k,2);case"ddd":return O(e.weekdaysShort,n.$W,k,3);case"dddd":return k[n.$W];case"H":return String(d);case"HH":return f.s(d,2,"0");case"h":return A(1);case"hh":return A(2);case"a":return x(d,p,!0);case"A":return x(d,p,!1);case"m":return String(p);case"mm":return f.s(p,2,"0");case"s":return String(n.$s);case"ss":return f.s(n.$s,2,"0");case"SSS":return f.s(n.$ms,3,"0");case"Z":return o}return null}(w)||o.replace(":","")})},r.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},r.diff=function(t,n,e){var i,o=this,d=f.p(n),p=$(t),m=(p.utcOffset()-this.utcOffset())*a,k=this-p,C=function(){return f.m(o,p)};switch(d){case _:i=C()/12;break;case M:i=C();break;case Y:i=C()/3;break;case W:i=(k-m)/6048e5;break;case v:i=(k-m)/864e5;break;case S:i=k/l;break;case g:i=k/a;break;case D:i=k/h;break;default:i=k}return e?i:f.a(i)},r.daysInMonth=function(){return this.endOf(M).$D},r.$locale=function(){return F[this.$L]},r.locale=function(t,n){if(!t)return this.$L;var e=this.clone(),i=N(t,n,!0);return i&&(e.$L=i),e},r.clone=function(){return f.w(this.$d,this)},r.toDate=function(){return new Date(this.valueOf())},r.toJSON=function(){return this.isValid()?this.toISOString():null},r.toISOString=function(){return this.$d.toISOString()},r.toString=function(){return this.$d.toUTCString()},s}(),Q=B.prototype;return $.prototype=Q,[["$ms",y],["$s",D],["$m",g],["$H",S],["$W",v],["$M",M],["$y",_],["$D",b]].forEach(function(s){Q[s[1]]=function(r){return this.$g(r,s[0],s[1])}}),$.extend=function(s,r){return s.$i||(s(r,B,$),s.$i=!0),$},$.locale=N,$.isDayjs=q,$.unix=function(s){return $(1e3*s)},$.en=F[I],$.Ls=F,$.p={},$})})(et);var kt=et.exports;const vt=ot(kt);var wt={size:"1em",strokeWidth:4,strokeLinecap:"round",strokeLinejoin:"round",rtl:!1,theme:"outline",colors:{outline:{fill:"#333",background:"transparent"},filled:{fill:"#333",background:"#FFF"},twoTone:{fill:"#333",twoTone:"#2F88FF"},multiColor:{outStrokeColor:"#333",outFillColor:"#2F88FF",innerStrokeColor:"#FFF",innerFillColor:"#43CCF8"}},prefix:"i"};function Mt(){return"icon-"+((1+Math.random())*4294967296|0).toString(16).substring(1)}function Ct(u,c,h){var a=typeof c.fill=="string"?[c.fill]:c.fill||[],l=[],y=c.theme||h.theme;switch(y){case"outline":l.push(typeof a[0]=="string"?a[0]:"currentColor"),l.push("none"),l.push(typeof a[0]=="string"?a[0]:"currentColor"),l.push("none");break;case"filled":l.push(typeof a[0]=="string"?a[0]:"currentColor"),l.push(typeof a[0]=="string"?a[0]:"currentColor"),l.push("#FFF"),l.push("#FFF");break;case"two-tone":l.push(typeof a[0]=="string"?a[0]:"currentColor"),l.push(typeof a[1]=="string"?a[1]:h.colors.twoTone.twoTone),l.push(typeof a[0]=="string"?a[0]:"currentColor"),l.push(typeof a[1]=="string"?a[1]:h.colors.twoTone.twoTone);break;case"multi-color":l.push(typeof a[0]=="string"?a[0]:"currentColor"),l.push(typeof a[1]=="string"?a[1]:h.colors.multiColor.outFillColor),l.push(typeof a[2]=="string"?a[2]:h.colors.multiColor.innerStrokeColor),l.push(typeof a[3]=="string"?a[3]:h.colors.multiColor.innerFillColor);break}return{size:c.size||h.size,strokeWidth:c.strokeWidth||h.strokeWidth,strokeLinecap:c.strokeLinecap||h.strokeLinecap,strokeLinejoin:c.strokeLinejoin||h.strokeLinejoin,colors:l,id:u}}var Dt=Symbol("icon-context");function St(u,c,h){var a={name:"icon-"+u,props:["size","strokeWidth","strokeLinecap","strokeLinejoin","theme","fill","spin"],setup:function(y){var D=Mt(),g=at(Dt,wt);return function(){var S=y.size,v=y.strokeWidth,W=y.strokeLinecap,M=y.strokeLinejoin,Y=y.theme,_=y.fill,b=y.spin,H=Ct(D,{size:S,strokeWidth:v,strokeLinecap:W,strokeLinejoin:M,theme:Y,fill:_},g),j=[g.prefix+"-icon"];return j.push(g.prefix+"-icon-"+u),c&&g.rtl&&j.push(g.prefix+"-icon-rtl"),b&&j.push(g.prefix+"-icon-spin"),K("span",{class:j.join(" ")},[h(H)])}}};return a}const xt=St("local-two",!1,function(u){return K("svg",{width:u.size,height:u.size,viewBox:"0 0 48 48",fill:"none"},[K("path",{d:"M24 44C24 44 39 32 39 19C39 10.7157 32.2843 4 24 4C15.7157 4 9 10.7157 9 19C9 32 24 44 24 44Z",fill:u.colors[1],stroke:u.colors[0],"stroke-width":u.strokeWidth,"stroke-linejoin":u.strokeLinejoin},null),K("path",{d:"M24 25C27.3137 25 30 22.3137 30 19C30 15.6863 27.3137 13 24 13C20.6863 13 18 15.6863 18 19C18 22.3137 20.6863 25 24 25Z",fill:u.colors[3],stroke:u.colors[2],"stroke-width":u.strokeWidth,"stroke-linejoin":u.strokeLinejoin},null)])}),_t={class:"p-3"},bt=tt({__name:"EmptyView",props:{msg:{type:String,required:!1}},setup(u){const c=ut(ht,{});function h(){dt.openConfigPage(c.widgetParams.id)}return(a,l)=>(P(),ct("div",{class:"empty-key flex w-full text-center h-full items-center justify-center cursor-pointer",onClick:h},[lt("p",_t,ft(u.msg),1)]))}}),Lt=(u,c)=>{const h=u.__vccOpts||u;for(const[a,l]of c)h[a]=l;return h},X=Lt(bt,[["__scopeId","data-v-c8a8b1f0"]]),Wt=tt({__name:"QWeatherWrapper",props:{errorMsg:{type:String,required:!1},loading:{type:Boolean,required:!1},checkApiKey:{type:Boolean,required:!1,default:!0}},setup(u){const c=V("apiKey","");return(h,a)=>{const l=pt("widget-wrapper");return P(),J(l,null,{default:$t(()=>[u.checkApiKey&&!mt(c)?(P(),J(X,{key:0,msg:"点击设置 和风天气 API KEY"})):u.errorMsg?(P(),J(X,{key:1,msg:u.errorMsg},null,8,["msg"])):yt(h.$slots,"default",{key:2})]),_:3})}}});function jt(u){const c=V("locationId",R.id),h=V("selectLocation",R),a=V("apiKey",""),l=U(vt()),y=U(""),D=U(),g=U(!1),S=()=>{y.value="",g.value=!0,u().then(v=>{D.value=v}).catch(v=>{y.value=v.message}).finally(()=>g.value=!1)};return gt(()=>{S()},60*60*1e3),{locationId:c,selectLocation:h,apiKey:a,now:l,loading:g,update:S,errorMsg:y,responseData:D}}class Tt{static getBackgroundClass(c){return this.between(c,101,104)||this.between(c,151,153)?"city-weather-cloudy":this.between(c,101,399)?"city-weather-rain":this.between(c,400,499)?"city-weather-snow":this.between(c,500,515)?"city-weather-haze":"city-weather-sun"}static between(c,h,a){return c>=h&&c<=a}}export{xt as L,Tt as W,Wt as _,Lt as a,vt as d,jt as u};
