import{u as y,W as v,L as W,_ as b,d as k,a as C}from"./WeatherUtils-CVYadpgX.js";import{d as D,c as I,P as L,o as l,a as N,w as A,u as t,e as u,b as e,f as V,g as h,t as r,I as q,a1 as B,n as m,h as F,W as S,p as $,i as T}from"./index-DwOVHvXi.js";import{b as Y,L as j,c as E}from"./GeoApi-BUuivxZ1.js";class M{static getForecastDayText(a){return a==0?"今天":a==1?"明天":"后天"}}class g{static async get(a,n=j){return(await Y.get(`https://widget-api.qweather.net/s6/plugin/view?key=68d458440fb9405d80a45973018cf1a2&location=CN${a}&lang=${n}`)).data}static getAQIClass(a){return a<=50?"city-weather-aqi-1":a<=100?"city-weather-aqi-2":a<=150?"city-weather-aqi-3":a<=200?"city-weather-aqi-4":a<=300?"city-weather-aqi-5":"city-weather-aqi-6"}}const Q=c=>($("data-v-9a5cf0e9"),c=c(),T(),c),U={class:"flex flex-col weather-bg relative gap-2 h-full"},G={class:"flex p-2"},H={class:"ml-auto text-right leading-6"},P=Q(()=>e("br",null,null,-1)),z={class:"flex flex-col p-2 w-full items-center gap-2 flex-1"},O={class:"flex items-center"},J=["src"],K={class:"current-live__item"},R={class:"text-2xl"},X={class:"current-basic flex justify-around justify-center items-center mt-auto mx-4 my-4"},Z={class:"font-bold"},ee=["src"],te=D({__name:"WeatherLargeWidgetView",setup(c){function a(){return g.get(p.value.id)}const{errorMsg:n,responseData:s,now:_,selectLocation:p,update:w}=y(a),x=I(()=>{var i;return v.getBackgroundClass(Number.parseInt(((i=s.value)==null?void 0:i.now.cond_code)??"100"))});return L(S,{onDataLoaded(){w()}}),E(()=>{_.value=k()},60*1e3),(i,ae)=>(l(),N(b,{"check-api-key":!1,"error-msg":t(n)},{default:A(()=>{var f;return[t(s)?(l(),u("div",{key:0,class:m(["root theme--light",{[x.value]:!0}])},[e("div",U,[e("div",G,[e("p",null,[V(t(W)),h(" "+r(t(p).name),1)]),e("p",H,[h(r(t(_).format("YYYY-MM-DD HH:mm"))+" ",1),P])]),e("div",z,[e("div",O,[e("img",{width:"80px",src:`/weather/image/${(f=t(s))==null?void 0:f.now.cond_code}.png`,alt:"QWeather"},null,8,J),e("div",K,[e("p",R,r(t(s).now.tmp)+"° ",1),e("p",null,r(t(s).now.cond_txt),1)])]),e("p",null,r(t(s).rain.txt),1)]),e("div",X,[(l(!0),u(q,null,B(t(s).daily_forecast,(d,o)=>(l(),u("div",{key:o,class:"flex flex-col gap-2 items-center"},[e("p",Z,r(t(M).getForecastDayText(o)),1),e("img",{width:"24px",src:`/weather/image/${d.cond_code_d}.png`,alt:""},null,8,ee),e("p",null,r(d.tmp_min)+"/"+r(d.tmp_max)+"°",1),e("p",{class:m({[t(g).getAQIClass(Number.parseInt(t(s).air_forecast[o].aqi))]:!0})},r(t(s).air_forecast[o].qlty),3)]))),128))])])],2)):F("",!0)]}),_:1},8,["error-msg"]))}}),oe=C(te,[["__scopeId","data-v-9a5cf0e9"]]);export{oe as default};
