import{d as W,P as b,r as u,c as k,a as N,o as c,b as A,w as S,f as d,e,g as T,u as n,h as g,t as o,J as V,a0 as q,n as h,i as B,W as F,p as j,j as E}from"./index-JX5HRqIc.js";import{c as Y,L as $,W as M,u as w,D as v,a as x}from"./WeatherApi-B0aeF-Ox.js";import{d as y}from"./dayjs.min-CxgbEYMO.js";import{L as O,_ as Q}from"./_plugin-vue_export-helper-CmphopXw.js";class U{static getForecastDayText(t){return t==0?"今天":t==1?"明天":"后天"}}class C{static async get(t,a=$){return(await Y.get(`https://widget-api.qweather.net/s6/plugin/view?key=68d458440fb9405d80a45973018cf1a2&location=CN${t}&lang=${a}`)).data}static getAQIClass(t){return t<=50?"city-weather-aqi-1":t<=100?"city-weather-aqi-2":t<=150?"city-weather-aqi-3":t<=200?"city-weather-aqi-4":t<=300?"city-weather-aqi-5":"city-weather-aqi-6"}}const G=r=>(j("data-v-4d597439"),r=r(),E(),r),H={class:"flex flex-col weather-bg relative gap-2 h-full"},P={class:"flex p-2"},z={class:"ml-auto text-right leading-6"},J=G(()=>e("br",null,null,-1)),K={class:"flex flex-col p-2 w-full items-center gap-2 flex-1"},R={class:"flex items-center"},X=["src"],Z={class:"current-live__item"},ee={class:"text-2xl"},te={class:"current-basic flex justify-around justify-center items-center mt-auto mx-4 my-4"},ae={class:"font-bold"},se=["src"],oe=W({__name:"WeatherLargeWidgetView",setup(r){b(F,{onDataLoaded(){p()}});const t=u(""),a=u(),_=k(()=>{var s;return M.getBackgroundClass(Number.parseInt(((s=a.value)==null?void 0:s.now.cond_code)??"100"))}),I=w("locationId",v.id),L=w("selectLocation",v);function p(){C.get(I.value).then(s=>{s.status=="ok"?a.value=s:t.value=s.status}).catch(s=>{s.message&&(t.value=s.message)})}x(()=>{p()},60*60*1e3);const m=u(y());return x(()=>{m.value=y()},60*1e3),(s,re)=>{const D=N("widget-wrapper");return c(),A(D,null,{default:S(()=>{var f;return[a.value?(c(),d("div",{key:0,class:h(["root theme--light",{[_.value]:!0}])},[e("div",H,[e("div",P,[e("p",null,[T(n(O)),g(" "+o(n(L).name),1)]),e("p",z,[g(o(m.value.format("YYYY-MM-DD HH:mm"))+" ",1),J])]),e("div",K,[e("div",R,[e("img",{width:"80px",src:`/weather/image/${(f=a.value)==null?void 0:f.now.cond_code}.png`,alt:"QWeather"},null,8,X),e("div",Z,[e("p",ee,o(a.value.now.tmp)+"° ",1),e("p",null,o(a.value.now.cond_txt),1)])]),e("p",null,o(a.value.rain.txt),1)]),e("div",te,[(c(!0),d(V,null,q(a.value.daily_forecast,(i,l)=>(c(),d("div",{key:l,class:"flex flex-col gap-2 items-center"},[e("p",ae,o(n(U).getForecastDayText(l)),1),e("img",{width:"24px",src:`/weather/image/${i.cond_code_d}.png`,alt:""},null,8,se),e("p",null,o(i.tmp_min)+"/"+o(i.tmp_max)+"°",1),e("p",{class:h({[n(C).getAQIClass(Number.parseInt(a.value.air_forecast[l].aqi))]:!0})},o(a.value.air_forecast[l].qlty),3)]))),128))])])],2)):B("",!0)]}),_:1})}}}),ue=Q(oe,[["__scopeId","data-v-4d597439"]]);export{ue as default};
