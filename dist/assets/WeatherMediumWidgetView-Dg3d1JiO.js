var j=Object.defineProperty;var P=(a,t,s)=>t in a?j(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s;var g=(a,t,s)=>(P(a,typeof t!="symbol"?t+"":t,s),s);import{u as b,W as B,L as C,_ as N,d as Y,a as E}from"./WidgetWeatherApi-Da_jlyH0.js";import{d as M,q as V,c as v,o as y,a as I,w as L,b as e,u as o,e as Q,t as l,g as w,f as q,h as A,n as K,W as T}from"./index-U4clKJkw.js";import{c as F,b as H}from"./GeoApi-C9FCh2v_.js";const $=F.create({});$.interceptors.response.use(a=>{if(a.status==200){const t=a.data.code;let s="未知错误";return t!=200?(t==204?s="请求成功，但你查询的地区暂时没有你需要的数据。":t==400?s="请求错误，可能包含错误的请求参数或缺少必选的请求参数。":t==401?s="认证失败，可能使用了错误的KEY、数字签名错误、KEY的类型错误":t==402?s="超过访问次数或余额不足以支持继续访问服务":t==403?s="无访问权限，可能是绑定的PackageName、BundleID、域名IP地址不一致":t==404?s="查询的数据或地区不存在":t==429?s="超过限定的QPM（每分钟访问次数）":t==500&&(s="无响应或超时，接口服务异常请联系和风天气"),Promise.reject(new W(s,t))):Promise.resolve(a.data)}else return Promise.reject(new W("未知错误","未知错误"))},a=>Promise.reject(a));class W extends Error{constructor(s,r){super(s);g(this,"code");this.code=r}}const z={key:0,class:"flex flex-col theme--light gap-1 justify-around",style:{height:"94%"}},S={class:"flex px-2"},U={class:"flex items-center"},G=["src"],J={class:"current-live__item"},O={class:"text-2xl"},R={class:"current-time ml-auto text-right leading-6"},X=e("br",null,null,-1),Z={class:"current-basic flex justify-around justify-center items-center"},ee={class:"flex flex-col items-center gap-1"},te=e("p",null,"空气质量",-1),se={class:"flex flex-col items-center gap-1"},ae=e("p",null,"预报风向",-1),oe={class:"flex flex-col items-center gap-1"},re=e("p",null,"最低气温",-1),le={class:"flex flex-col items-center gap-1"},ce=e("p",null,"最高气温",-1),fe=M({__name:"WeatherMediumWidgetView",setup(a){V(T,{onDataLoaded(){k()}});function t(){return E.get(d.value.id)}const{errorMsg:s,responseData:r,now:i,selectLocation:d,apiKey:ne,update:k}=b(t),n=v(()=>{var c;return(c=r.value)==null?void 0:c.now}),D=v(()=>{var c;return B.getBackgroundClass(Number.parseInt(((c=n.value)==null?void 0:c.cond_code)??"100"))});return H(()=>{i.value=Y()},60*1e3),(c,ie)=>(y(),I(N,{"check-api-key":!1,"error-msg":o(s)},{default:L(()=>{var u,_,m,f,p,h,x;return[e("div",{class:K(["root",{[D.value]:!0}])},[o(r)?(y(),Q("div",z,[e("div",S,[e("div",U,[e("img",{width:"64px",src:`/weather/image/${(u=n.value)==null?void 0:u.cond_code}.png`,alt:"QWeather"},null,8,G),e("div",J,[e("p",O,l((_=n.value)==null?void 0:_.tmp)+"° ",1),e("p",null,l((m=n.value)==null?void 0:m.cond_txt),1)])]),e("p",R,[w(l(o(i).format("YYYY-MM-DD HH:mm"))+" ",1),X,e("span",null,[q(o(C)),w(l(o(d).name),1)])])]),e("div",Z,[e("div",ee,[e("p",null,l((f=o(r))==null?void 0:f.air_forecast[0].qlty),1),te]),e("div",se,[e("p",null,l((p=o(r))==null?void 0:p.daily_forecast[0].wind_dir),1),ae]),e("div",oe,[e("p",null,l((h=o(r))==null?void 0:h.daily_forecast[0].tmp_min)+"℃",1),re]),e("div",le,[e("p",null,l((x=o(r))==null?void 0:x.daily_forecast[0].tmp_max)+"℃",1),ce])])])):A("",!0)],2)]}),_:1},8,["error-msg"]))}});export{fe as default};
